<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recruitment Flow Form</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f7f5f4;
    display: flex;
    justify-content: center;
    padding: 30px;
  }

  .form-flow {
    width: 700px;
    background: #fff;
    border-radius: 12px;
    padding: 25px 35px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  }

  .form-flow h2 {
    background: #6a86dc;
    color: white;
    text-align: center;
    padding: 12px;
    border-radius: 10px;
    font-size: 1.3rem;
  }

  .section {
    border: 2px solid #000;
    border-radius: 10px;
    padding: 20px;
    margin-top: 25px;
    background-color: #fafafa;
  }

  .section h3 {
    margin-top: 0;
    font-size: 1.1rem;
    border-bottom: 1px solid #ccc;
    padding-bottom: 5px;
  }

  label {
    display: block;
    margin-top: 10px;
    font-weight: 600;
  }

  input, select, textarea {
    width: 100%;
    padding: 8px;
    margin-top: 5px;
    border-radius: 6px;
    border: 1px solid #ccc;
  }

  button {
    margin-top: 25px;
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    background-color: #d86dd8;
    color: white;
    font-weight: bold;
    cursor: pointer;
  }

  button:hover {
    background-color: #b84bb8;
  }

  .arrow {
    text-align: center;
    font-size: 20px;
    margin-top: 10px;
    color: #888;
  }

  .success {
    background-color: #d4edda;
    color: #155724;
    padding: 10px;
    border-radius: 8px;
    margin-top: 15px;
    text-align: center;
  }

  .error {
    background-color: #f8d7da;
    color: #721c24;
    padding: 10px;
    border-radius: 8px;
    margin-top: 15px;
    text-align: center;
  }
</style>
</head>
<body>
  <form class="form-flow" id="recruitmentForm">
    <h2>OPEN POSITION</h2>

    <div class="section">
      <h3>1. New Requirement</h3>
      
      <label>Department</label>
      <input type="text" name="department" placeholder="Enter department name" required>

      <label>Position Title</label>
      <input type="text" name="position" placeholder="Enter job title" required>

      <label>HR Department Email</label>
      <input type="email" name="hr_email" placeholder="Enter HR department email" required>

      <label>Gender</label>
      <select name="gender" required>
        <option value="">-- Select Gender --</option>
        <option value="Male">Male</option>
        <option value="Female">Female</option>
      </select>

      <label>Experience</label>
      <input type="number" name="experience" placeholder="Number of Years Experience">

      <label>Salary Range</label>
      <select name="salary">
        <option value="">-- Select Range --</option>
        <option value="1-3 lakh">1-3 lakh</option>
        <option value="4-5 lakh">4-5 lakh</option>
      </select>

      <label>Reason for New Requirement</label>
      <textarea name="reason" rows="3" placeholder="Describe why this position is needed"></textarea>
    </div>

    <div class="arrow">↓</div>

    <div class="section">
      <h3>2. JD Creation</h3>
      <label>Job Description</label>
      <textarea name="jd" rows="4" placeholder="Write or paste job description here"></textarea>

      <label>Required Skills</label>
      <input type="text" name="skills" placeholder="e.g. Networking, React.js, SQL">
    </div>

    <div class="arrow">↓</div>

    <div class="section">
      <h3>3. Replacement</h3>
      <label>Is this a replacement for an existing employee?</label>
      <select name="replacement">
        <option value="">-- Select --</option>
        <option value="Yes">Yes</option>
        <option value="No">No</option>
      </select>

      <label>If Yes, Employee Name</label>
      <input type="text" name="employee_name" placeholder="Enter previous employee name">
    </div>

    <button type="submit">Submit Request</button>

    <div id="responseMsg"></div>
  </form>

  <script>
    const form = document.getElementById("recruitmentForm");
    const responseMsg = document.getElementById("responseMsg");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const formData = new FormData(form);
      const data = {};
      formData.forEach((value, key) => (data[key] = value));

      try {
        const res = await fetch("https://wowflo.io/webhook-test/requirement-submit", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data),
        });

        if (res.ok) {
          responseMsg.innerHTML = `<div class="success">✅ Form submitted successfully!</div>`;
          form.reset();
        } else {
          responseMsg.innerHTML = `<div class="error">❌ Submission failed. Please try again.</div>`;
        }
      } catch (err) {
        responseMsg.innerHTML = `<div class="error">⚠️ Error: ${err.message}</div>`;
      }
    });
  </script>
</body>
</html>
