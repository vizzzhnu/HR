<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Candidate Submission</title>
<!-- <style>
/* Â  * { box-sizing: border-box; } */
Â body { 
   font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
   background: #f4f6f8; 
   margin: 0; 
   padding: 0;
   font-size: 15px;
   line-height: 1.6;
   color: #333;
 }
Â  .container { width: 100%; min-height: 100vh; padding: 40px; background: linear-gradient(to right, #f7f5f4, #eef0f5); }
Â  .form-wrapper { background: white; border-radius: 16px; padding: 35px; box-shadow: 0 6px 20px rgba(0,0,0,0.15); max-width: 1300px; margin: 0 auto; }
Â Â 
Â  .logo-container { display: flex; align-items: center; gap: 15px; margin-bottom: 25px; padding-bottom: 20px; border-bottom: 2px solid #e0e0e0; justify-content: center; }
Â  .logo-container img { max-height: 60px; width: auto; object-fit: contain; transition: transform 0.3s ease; }
Â Â 
Â  h2 {Â 
  text-align: center;Â 
Â  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
Â  Â  color: white;Â 
Â  Â  padding: 20px;Â 
Â  Â  border-radius: 12px;Â 
Â  Â  margin: 0 0 25px 0;Â 
Â  Â  font-size: 2rem;
Â  Â  font-weight: 700;
Â  Â  letter-spacing: 0.5px;
Â  Â  text-shadow: 0 2px 4px rgba(0,0,0,0.1);
Â  }
Â  h3 {
Â  Â  font-size: 1.3rem;
Â  Â  font-weight: 600;
Â  Â  color: #2c3e50;
Â  Â  margin-bottom: 15px;
Â  }
Â  label {Â 
Â  Â  display: block;Â 
Â  Â  font-weight: 600;Â 
Â  Â  margin-top: 12px;
Â  Â  font-size: 0.95rem;
Â  Â  color: #2c3e50;
Â  Â  letter-spacing: 0.3px;
Â  }
Â  input, select, textarea {Â 
Â  Â  width: 100%;Â 
Â  Â  padding: 12px 14px;Â 
Â  Â  margin-top: 6px;Â 
Â  Â  border: 2px solid #e0e0e0;Â 
Â  Â  border-radius: 8px;
Â  Â  font-size: 0.95rem;
Â  Â  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
Â  Â  transition: all 0.3s ease;
Â  }
Â  input:focus, select:focus, textarea:focus {
Â  Â  outline: none;
Â  Â  border-color: #667eea;
Â  Â  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
Â  }
Â Â 
Â  .info-box { background: #e7f3ff; border-left: 4px solid #2196F3; padding: 15px; margin-bottom: 20px; border-radius: 4px; font-size: 0.95rem; }
Â  .info-box strong { font-size: 1.05rem; font-weight: 700; }
Â Â 
Â  .submission-type-section { background: #fff3e0; border: 2px solid #ff9800; border-radius: 12px; padding: 20px; margin-bottom: 25px; }
Â  .submission-type-section h3 { margin-top: 0; color: #e65100; font-size: 1.25rem; font-weight: 700; }
Â Â 
Â  .import-section { background: #e8f4f8; border: 2px dashed #4a90e2; border-radius: 12px; padding: 25px; margin-bottom: 25px; text-align: center; }
Â  .import-section h3 { margin-top: 0; color: #2c5aa0; font-size: 1.25rem; font-weight: 700; }
Â  .import-btn-group { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-top: 15px; }
Â Â 
Â  .submitter-details { background: #f0f8ff; border: 2px solid #4a90e2; border-radius: 12px; padding: 20px; margin-bottom: 25px; }
Â  .submitter-details h3 { margin-top: 0; color: #2c5aa0; font-size: 1.25rem; font-weight: 700; }
Â Â 
Â  .btn {Â 
Â  Â  padding: 13px 28px;Â 
Â  Â  border: none;Â 
Â  Â  border-radius: 8px;Â 
Â  Â  cursor: pointer;Â 
Â  Â  font-weight: 700;Â 
Â  Â  font-size: 1rem;
Â  Â  transition: all 0.3s;
Â  Â  letter-spacing: 0.5px;
Â  Â  text-transform: uppercase;
Â  Â  font-size: 0.9rem;
Â  }
Â  .btn-green { background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3); }
Â  .btn-green:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(40, 167, 69, 0.4); }
Â  .btn-blue { background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%); color: white; box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3); }
Â  .btn-blue:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(74, 144, 226, 0.4); }
Â  #fileInput { display: none; }
Â Â 
Â  .candidate-section { border: 2px solid #d0d0d0; border-radius: 12px; padding: 25px; margin-top: 25px; background: #fafafa; position: relative; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
Â  .candidate-section h3 { margin-top: 0; color: #2c3e50; border-bottom: 2px solid #667eea; padding-bottom: 10px; font-size: 1.2rem; font-weight: 700; }
Â  .form-row { display: flex; flex-wrap: wrap; gap: 20px; }
Â  .form-group { flex: 1; min-width: 250px; }
Â Â 
Â  .upload-box { border: 2px dashed #aaa; padding: 15px; text-align: center; background: #fff; border-radius: 8px; margin-top: 5px; }
Â  .resume-info { margin-top: 10px; font-size: 0.85rem; color: #666; }
Â Â 
Â  .delete-btn {Â 
Â  Â  position: absolute;Â 
Â  Â  right: 15px;Â 
Â  Â  top: 15px;Â 
Â  Â  background: linear-gradient(135deg, #ff4d4d 0%, #e63939 100%);Â 
Â  Â  color: white;Â 
Â  Â  border: none;Â 
Â  Â  border-radius: 6px;Â 
Â  Â  padding: 8px 16px;Â 
Â  Â  cursor: pointer;Â 
Â  Â  font-weight: 700;Â 
Â  Â  font-size: 0.85rem;
Â  Â  letter-spacing: 0.5px;
Â  Â  box-shadow: 0 2px 8px rgba(255, 77, 77, 0.3);
Â  Â  transition: all 0.3s;
Â  }
Â  .delete-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(255, 77, 77, 0.4); }
Â Â 
Â  .add-btn {Â 
Â  Â  margin-top: 25px;Â 
Â  Â  background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);Â 
Â  Â  color: white;Â 
Â  Â  border: none;Â 
Â  Â  padding: 14px 30px;Â 
Â  Â  border-radius: 8px;Â 
Â  Â  cursor: pointer;Â 
Â  Â  font-weight: 700;
Â  Â  font-size: 1rem;
Â  Â  letter-spacing: 0.5px;
Â  Â  box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);
Â  Â  transition: all 0.3s;
Â  }
Â  .add-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(74, 144, 226, 0.4); }
Â Â 
Â  .submit-btn {Â 
Â  Â  margin-top: 25px;Â 
Â  Â  background: linear-gradient(135deg, #28a745 0%, #20c997 100%);Â 
Â  Â  color: white;Â 
Â  Â  border: none;Â 
Â  Â  padding: 16px 40px;Â 
Â  Â  border-radius: 10px;Â 
Â  Â  cursor: pointer;Â 
Â  Â  font-weight: 700;Â 
Â  Â  font-size: 1.1rem;
Â  Â  letter-spacing: 0.8px;
Â  Â  text-transform: uppercase;
Â  Â  box-shadow: 0 4px 16px rgba(40, 167, 69, 0.3);
Â  Â  transition: all 0.3s;
Â  }
Â  .submit-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4); }
Â Â 
Â  .success, .error { padding: 16px; border-radius: 10px; margin-top: 20px; text-align: center; font-weight: 600; font-size: 1rem; }
Â  .success { background: #d4edda; color: #155724; border: 2px solid #c3e6cb; }
Â  .error { background: #f8d7da; color: #721c24; border: 2px solid #f5c6cb; }
Â  .hidden { display: none; }
Â Â 
Â  .loader { display: none; text-align: center; margin-top: 20px; }
Â  .loader.active { display: block; }
Â  .spinner { border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto; }
Â  @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
Â Â 
Â  @media (max-width: 768px) {Â 
Â  Â  .logo-container { flex-wrap: wrap; gap: 10px; }
Â  Â  .logo-container img { max-height: 45px; }
Â  Â  .form-row { flex-direction: column; }
Â  Â  h2 { font-size: 1.5rem; padding: 16px 15px; }
Â  Â  h3 { font-size: 1.1rem; }
Â  Â  label { font-size: 0.9rem; }
Â  Â  input, select, textarea { font-size: 0.9rem; padding: 10px 12px; }
Â  Â  .btn { padding: 12px 24px; font-size: 0.85rem; }
Â  Â  .submit-btn { padding: 14px 32px; font-size: 1rem; }
Â  }
</style> -->
<style>
  * { box-sizing: border-box; }
  
  body { 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
    background: #f4f6f8; 
    margin: 0; 
    padding: 0;
    font-size: 15px;
    line-height: 1.6;
    color: #333;
  }

  .container { 
    width: 100%; 
    min-height: 100vh; 
    padding: 40px; 
    background: linear-gradient(to right, #f7f5f4, #eef0f5); 
  }

  .form-wrapper { 
    background: white; 
    border-radius: 16px; 
    padding: 35px; 
    box-shadow: 0 6px 20px rgba(0,0,0,0.15); 
    max-width: 1300px; 
    margin: 0 auto; 
  }
  
  .logo-container { 
    display: flex; 
    align-items: center; 
    gap: 15px; 
    margin-bottom: 25px; 
    padding-bottom: 20px; 
    border-bottom: 2px solid #e0e0e0; 
    justify-content: center; 
  }

  .logo-container img { 
    max-height: 60px; 
    width: auto; 
    object-fit: contain; 
    transition: transform 0.3s ease; 
  }
  
  h2 { 
    text-align: center; 
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white; 
    padding: 20px; 
    border-radius: 12px; 
    margin: 0 0 25px 0; 
    font-size: 2rem;
    font-weight: 700;
    letter-spacing: 0.5px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }

  h3 {
    font-size: 1.3rem;
    font-weight: 600;
    color: #2c3e50;
    margin-bottom: 15px;
  }

  label { 
    display: block; 
    font-weight: 600; 
    margin-top: 12px;
    font-size: 0.95rem;
    color: #2c3e50;
    letter-spacing: 0.3px;
  }

  input, select, textarea { 
    width: 100%; 
    padding: 12px 14px; 
    margin-top: 6px; 
    border: 2px solid #e0e0e0; 
    border-radius: 8px;
    font-size: 0.95rem;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    transition: all 0.3s ease;
  }

  input:focus, select:focus, textarea:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
  }
  
  .info-box { 
    background: #e7f3ff; 
    border-left: 4px solid #2196F3; 
    padding: 15px; 
    margin-bottom: 20px; 
    border-radius: 4px; 
    font-size: 0.95rem; 
  }

  .info-box strong { font-size: 1.05rem; font-weight: 700; }
  
  .submission-type-section { 
    background: #fff3e0; 
    border: 2px solid #ff9800; 
    border-radius: 12px; 
    padding: 20px; 
    margin-bottom: 25px; 
  }

  .submission-type-section h3 { margin-top: 0; color: #e65100; font-size: 1.25rem; font-weight: 700; }
  
  .import-section { 
    background: #e8f4f8; 
    border: 2px dashed #4a90e2; 
    border-radius: 12px; 
    padding: 25px; 
    margin-bottom: 25px; 
    text-align: center; 
  }

  .import-section h3 { margin-top: 0; color: #2c5aa0; font-size: 1.25rem; font-weight: 700; }
  .import-btn-group { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-top: 15px; }
  
  .submitter-details { 
    background: #f0f8ff; 
    border: 2px solid #4a90e2; 
    border-radius: 12px; 
    padding: 20px; 
    margin-bottom: 25px; 
  }

  .submitter-details h3 { margin-top: 0; color: #2c5aa0; font-size: 1.25rem; font-weight: 700; }
  
  .btn { 
    padding: 13px 28px; 
    border: none; 
    border-radius: 8px; 
    cursor: pointer; 
    font-weight: 700; 
    transition: all 0.3s;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    font-size: 0.9rem;
  }

  .btn-green { 
    background: linear-gradient(135deg, #28a745 0%, #20c997 100%); 
    color: white; 
    box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3); 
  }

  .btn-green:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(40, 167, 69, 0.4); }

  .btn-blue { 
    background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%); 
    color: white; 
    box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3); 
  }

  .btn-blue:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(74, 144, 226, 0.4); }

  #fileInput { display: none; }
  
  .candidate-section { 
    border: 2px solid #d0d0d0; 
    border-radius: 12px; 
    padding: 25px; 
    margin-top: 25px; 
    background: #fafafa; 
    position: relative; 
    box-shadow: 0 2px 8px rgba(0,0,0,0.05); 
  }

  .candidate-section h3 { 
    margin-top: 0; 
    color: #2c3e50; 
    border-bottom: 2px solid #667eea; 
    padding-bottom: 10px; 
    font-size: 1.2rem; 
    font-weight: 700; 
  }

  .form-row { display: flex; flex-wrap: wrap; gap: 20px; }
  .form-group { flex: 1; min-width: 250px; }
  
  .upload-box { 
    border: 2px dashed #aaa; 
    padding: 15px; 
    text-align: center; 
    background: #fff; 
    border-radius: 8px; 
    margin-top: 5px; 
  }

  .resume-info { margin-top: 10px; font-size: 0.85rem; color: #666; }
  
  .delete-btn { 
    position: absolute; 
    right: 15px; 
    top: 15px; 
    background: linear-gradient(135deg, #ff4d4d 0%, #e63939 100%); 
    color: white; 
    border: none; 
    border-radius: 6px; 
    padding: 8px 16px; 
    cursor: pointer; 
    font-weight: 700; 
    font-size: 0.85rem;
    letter-spacing: 0.5px;
    box-shadow: 0 2px 8px rgba(255, 77, 77, 0.3);
    transition: all 0.3s;
  }

  .delete-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(255, 77, 77, 0.4); }
  
  .add-btn { 
    margin-top: 25px; 
    background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%); 
    color: white; 
    border: none; 
    padding: 14px 30px; 
    border-radius: 8px; 
    cursor: pointer; 
    font-weight: 700;
    font-size: 1rem;
    letter-spacing: 0.5px;
    box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);
    transition: all 0.3s;
  }

  .add-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(74, 144, 226, 0.4); }
  
  .submit-btn { 
    margin-top: 25px; 
    background: linear-gradient(135deg, #28a745 0%, #20c997 100%); 
    color: white; 
    border: none; 
    padding: 16px 40px; 
    border-radius: 10px; 
    cursor: pointer; 
    font-weight: 700; 
    font-size: 1.1rem;
    letter-spacing: 0.8px;
    text-transform: uppercase;
    box-shadow: 0 4px 16px rgba(40, 167, 69, 0.3);
    transition: all 0.3s;
  }

  .submit-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4); }
  
  .success, .error { padding: 16px; border-radius: 10px; margin-top: 20px; text-align: center; font-weight: 600; font-size: 1rem; }
  .success { background: #d4edda; color: #155724; border: 2px solid #c3e6cb; }
  .error { background: #f8d7da; color: #721c24; border: 2px solid #f5c6cb; }
  .hidden { display: none; }
  
  .loader { display: none; text-align: center; margin-top: 20px; }
  .loader.active { display: block; }
  .spinner { border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto; }
  @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
  
  @media (max-width: 768px) { 
    .logo-container { flex-wrap: wrap; gap: 10px; }
    .logo-container img { max-height: 45px; }
    .form-row { flex-direction: column; }
    h2 { font-size: 1.5rem; padding: 16px 15px; }
    h3 { font-size: 1.1rem; }
    label { font-size: 0.9rem; }
    /* Enhanced Input Styling */
input, select, textarea {
  background-color: #ffffff;
  border: 1px solid #d1d9e6; /* Softer border color */
  box-shadow: inset 2px 2px 5px #f0f2f5; /* Subtle inner shadow for depth */
}

input:focus {
  border-color: #667eea;
  box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.15); /* More prominent focus ring */
}

/* Section Separation */
.candidate-section {
  border: none;
  border-left: 5px solid #667eea; /* Color-coded left border for better separation */
  background: #ffffff;
  transition: transform 0.2s ease-in-out;
}

.candidate-section:hover {
  transform: scale(1.01); /* Subtle lift on hover to show interactivity */
}
  }
</style>
</head>
<body>
Â  <div class="container">
Â  Â  <div class="form-wrapper">
Â  Â  Â  <!-- Logo Container -->
Â  Â  Â  <div class="logo-container">
Â  Â  Â  Â  <img src="https://red-fish.s3.ap-south-1.amazonaws.com/images/brands/thumbnails/ALL+BRAND+LOGO.jpeg" alt="Company Brands">
Â  Â  Â  </div>
Â  Â  Â Â 
Â  Â  Â  <h2>Candidate Submission</h2>
Â  Â  Â Â 
Â  Â  Â  <div class="info-box" id="infoBox" style="display: none;">
Â  Â  Â  Â  <strong>ğŸ“‹ Agency Submission:</strong><br>
Â  Â  Â  Â  Submit multiple candidates from your recruitment agency. CSV bulk upload is supported for faster data entry.
Â  Â  Â  </div>

Â  Â  Â  <!-- Submission Type Selection -->
Â  Â  Â  <div class="submission-type-section">
Â  Â  Â  Â  <h3>Select Submission Type *</h3>
Â  Â  Â  Â  <select id="submissionType" onchange="handleSubmissionTypeChange()" required>
Â  Â  Â  Â  Â  <option value="">-- Select Submission Type --</option>
Â  Â  Â  Â  Â  <option value="applicant">Applicant (Self)</option>
Â  Â  Â  Â  Â  <option value="agency">Agency</option>
Â  Â  Â  Â  </select>
Â  Â  Â  </div>

Â  Â  Â  <!-- Submitter Details (Agency only) -->
Â  Â  Â  <div id="submitterDetails" class="submitter-details hidden">
Â  Â  Â  Â  <h3>Agency Details</h3>
Â  Â  Â  Â  <div class="form-row">
Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  <label>Agency Name *</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="submitterName" required>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  <label>Agency Email *</label>
Â  Â  Â  Â  Â  Â  <input type="email" id="submitterEmail" required>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <!-- Referral Section (Applicant only) -->
Â  Â  Â  <div id="referralSection" class="submitter-details hidden">
Â  Â  Â  Â  <h3>Application Source</h3>
Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  <label>Do you know anybody in our organization? *</label>
Â  Â  Â  Â  Â  <select id="referralChoice" onchange="handleReferralChange()" required>
Â  Â  Â  Â  Â  Â  <option value="">-- Select --</option>
Â  Â  Â  Â  Â  Â  <option value="yes">Yes</option>
Â  Â  Â  Â  Â  Â  <option value="no">No</option>
Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div id="referralFields" class="hidden" style="margin-top: 15px;">
Â  Â  Â  Â  Â  <div class="form-row">
Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  <label>Employee ID *</label>
Â  Â  Â  Â  Â  Â  Â  <input type="text" id="referralEmpId">
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  <label>Employee Email *</label>
Â  Â  Â  Â  Â  Â  Â  <input type="email" id="referralEmpEmail">
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div id="sourceField" class="hidden" style="margin-top: 15px;">
Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  <label>Where did you find this opening? *</label>
Â  Â  Â  Â  Â  Â  <select id="sourceSelect" required>
Â  Â  Â  Â  Â  Â  Â  <option value="">-- Select Source --</option>
Â  Â  Â  Â  Â  Â  Â  <option value="LinkedIn">LinkedIn</option>
Â  Â  Â  Â  Â  Â  Â  <option value="Naukri">Naukri</option>
Â  Â  Â  Â  Â  Â  Â  <option value="Indeed">Indeed</option>
Â  Â  Â  Â  Â  Â  Â  <option value="Company Website">Company Website</option>
Â  Â  Â  Â  Â  Â  Â  <option value="Other">Other</option>
Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <!-- CSV Import Section (Agency only) -->
Â  Â  Â  <div id="importSection" class="import-section hidden">
Â  Â  Â  Â  <h3>ğŸ“Š CSV Import</h3>
Â  Â  Â  Â  <div class="import-btn-group">
Â  Â  Â  Â  Â  <button type="button" class="btn btn-green" onclick="downloadCSV()">ğŸ“¥ Download Template</button>
Â  Â  Â  Â  Â  <button type="button" class="btn btn-blue" onclick="document.getElementById('fileInput').click()">ğŸ“¤ Import CSV</button>
Â  Â  Â  Â  Â  <input type="file" id="fileInput" accept=".csv" onchange="importCSV(event)">
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <p style="font-size: 0.85rem; color: #666; margin-top: 10px;">CSV import will populate candidate details. You'll still need to upload resumes manually.</p>
Â  Â  Â  </div>

Â  Â  Â  <!-- Candidate Container -->
Â  Â  Â  <div id="candidateContainer" class="hidden"></div>

Â  Â  Â  <!-- Add Candidate Button (Agency only) -->
Â  Â  Â  <div id="addCandidateSection" class="hidden">
Â  Â  Â  Â  <button type="button" class="add-btn" onclick="addCand()">+ Add Candidate</button>
Â  Â  Â  </div>

Â  Â  Â  <!-- Submit Button -->
Â  Â  Â  <div id="submitSection" class="hidden">
Â  Â  Â  Â  <button type="button" class="submit-btn" onclick="submitForm()">âœ… Submit All Candidates</button>
Â  Â  Â  </div>

Â  Â  Â  <div class="loader" id="loader">
Â  Â  Â  Â  <div class="spinner"></div>
Â  Â  Â  Â  <p>Processing resumes and submitting..</p>
Â  Â  Â  </div>

Â  Â  Â  <div id="msg"></div>
Â  Â  </div>
Â  </div>

<script>
// Configuration - UPDATE THIS WITH YOUR N8N WEBHOOK URL
const N8N_WEBHOOK_URL = 'https://n8n.wowflo.io/webhook/hr_response';

// Get execution_id from URL
const urlParams = new URLSearchParams(window.location.search);
const EXECUTION_ID = urlParams.get('execution_id') || 'UNKNOWN';
console.log('Execution ID:', EXECUTION_ID);

let currentSubmissionType = '';

function handleReferralChange() {
Â  const referralChoice = document.getElementById('referralChoice').value;
Â  const referralFields = document.getElementById('referralFields');
Â  const sourceField = document.getElementById('sourceField');
Â  const empIdInput = document.getElementById('referralEmpId');
Â  const empEmailInput = document.getElementById('referralEmpEmail');
Â  const sourceSelect = document.getElementById('sourceSelect');
Â Â 
Â  if (referralChoice === 'yes') {
Â  Â  referralFields.classList.remove('hidden');
Â  Â  sourceField.classList.add('hidden');
Â  Â  empIdInput.required = true;
Â  Â  empEmailInput.required = true;
Â  Â  sourceSelect.required = false;
Â  Â  sourceSelect.value = '';
Â  } else if (referralChoice === 'no') {
Â  Â  referralFields.classList.add('hidden');
Â  Â  sourceField.classList.remove('hidden');
Â  Â  empIdInput.required = false;
Â  Â  empEmailInput.required = false;
Â  Â  empIdInput.value = '';
Â  Â  empEmailInput.value = '';
Â  Â  sourceSelect.required = true;
Â  } else {
Â  Â  referralFields.classList.add('hidden');
Â  Â  sourceField.classList.add('hidden');
Â  Â  empIdInput.required = false;
Â  Â  empEmailInput.required = false;
Â  Â  sourceSelect.required = false;
Â  }
}

function handleSubmissionTypeChange() {
Â  const submissionType = document.getElementById('submissionType').value;
Â  currentSubmissionType = submissionType;
Â Â 
Â  const infoBox = document.getElementById('infoBox');
Â  const submitterDetails = document.getElementById('submitterDetails');
Â  const referralSection = document.getElementById('referralSection');
Â  const importSection = document.getElementById('importSection');
Â  const candidateContainer = document.getElementById('candidateContainer');
Â  const addCandidateSection = document.getElementById('addCandidateSection');
Â  const submitSection = document.getElementById('submitSection');
Â Â 
Â  // Reset form
Â  candidateContainer.innerHTML = '';
Â  document.getElementById('submitterName').value = '';
Â  document.getElementById('submitterEmail').value = '';
Â  document.getElementById('referralChoice').value = '';
Â  document.getElementById('referralEmpId').value = '';
Â  document.getElementById('referralEmpEmail').value = '';
Â  document.getElementById('sourceSelect').value = '';
Â  document.getElementById('referralFields').classList.add('hidden');
Â  document.getElementById('sourceField').classList.add('hidden');
Â Â 
Â  if (submissionType === 'applicant') {
Â  Â  infoBox.style.display = 'none';
Â  Â  submitterDetails.classList.add('hidden');
Â  Â  referralSection.classList.remove('hidden');
Â  Â  importSection.classList.add('hidden');
Â  Â  addCandidateSection.classList.add('hidden');
Â  Â  candidateContainer.classList.remove('hidden');
Â  Â  submitSection.classList.remove('hidden');
Â  Â  addSingleCandidate();
Â  } else if (submissionType === 'agency') {
Â  Â  infoBox.style.display = 'block';
Â  Â  submitterDetails.classList.remove('hidden');
Â  Â  referralSection.classList.add('hidden');
Â  Â  importSection.classList.remove('hidden');
Â  Â  addCandidateSection.classList.remove('hidden');
Â  Â  candidateContainer.classList.remove('hidden');
Â  Â  submitSection.classList.remove('hidden');
Â  Â  addCand();
Â  } else {
Â  Â  infoBox.style.display = 'none';
Â  Â  submitterDetails.classList.add('hidden');
Â  Â  referralSection.classList.add('hidden');
Â  Â  importSection.classList.add('hidden');
Â  Â  addCandidateSection.classList.add('hidden');
Â  Â  candidateContainer.classList.add('hidden');
Â  Â  submitSection.classList.add('hidden');
Â  }
}

function addSingleCandidate() {
Â  const container = document.getElementById('candidateContainer');
Â  container.innerHTML = `
Â  Â  <div class="candidate-section">
Â  Â  Â  <h3>Your Details</h3>
Â  Â  Â  <div class="form-row">
Â  Â  Â  Â  <div class="form-group"><label>Name *</label><input type="text" class="cand-name" required></div>
Â  Â  Â  Â  <div class="form-group"><label>Email *</label><input type="email" class="cand-email" required></div>
Â  Â  Â  Â  <div class="form-group"><label>Current Organization</label><input type="text" class="cand-org"></div>
Â  Â  Â  </div>
Â  Â  Â  <div class="form-row">
Â  Â  Â  Â  <div class="form-group"><label>Experience (Yrs)</label><input type="number" class="cand-exp"></div>
Â  Â  Â  Â  <div class="form-group"><label>Notice (Days)</label><input type="text" class="cand-notice"></div>
Â  Â  Â  Â  <div class="form-group"><label>Current Location</label><input type="text" class="cand-loc"></div>
Â  Â  Â  </div>
Â  Â  Â  <div class="form-row">
Â  Â  Â  Â  <div class="form-group"><label>Preferred Location</label><input type="text" class="cand-pref"></div>
Â  Â  Â  Â  <div class="form-group"><label>Current CTC (LPA) </label><input type="text" class="cand-ctc"></div>
Â  Â  Â  Â  <div class="form-group"><label>Expected CTC (LPA)</label><input type="text" class="cand-ectc"></div>
Â  Â  Â  </div>
Â  Â  Â  <div class="form-group"><label>LinkedIn</label><input type="url" class="cand-li"></div>
Â  Â  Â  <div class="form-group"><label>Remarks</label><textarea class="cand-rem" rows="3"></textarea></div>
Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  <label>Resume (PDF/DOC/DOCX) *</label>
Â  Â  Â  Â  <div class="upload-box">
Â  Â  Â  Â  Â  <input type="file" class="cand-resume" accept=".pdf,.doc,.docx" required onchange="handleResumeUpload(this)">
Â  Â  Â  Â  Â  <div class="resume-info"></div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </div>
Â  `;
}

function addCand() {
Â  const container = document.getElementById('candidateContainer');
Â  const count = container.querySelectorAll('.candidate-section').length + 1;
Â  const section = document.createElement('div');
Â  section.className = 'candidate-section';
Â  section.innerHTML = `
Â  Â  <button type="button" class="delete-btn" onclick="deleteCand(this)">Delete</button>
Â  Â  <h3>Candidate ${count}</h3>
Â  Â  <div class="form-row">
Â  Â  Â  <div class="form-group"><label>Name *</label><input type="text" class="cand-name" required></div>
Â  Â  Â  <div class="form-group"><label>Email *</label><input type="email" class="cand-email" required></div>
Â  Â  Â  <div class="form-group"><label>Organization</label><input type="text" class="cand-org"></div>
Â  Â  </div>
Â  Â  <div class="form-row">
Â  Â  Â  <div class="form-group"><label>Experience (Yrs)</label><input type="number" class="cand-exp"></div>
Â  Â  Â  <div class="form-group"><label>Notice (Days)</label><input type="text" class="cand-notice"></div>
Â  Â  Â  <div class="form-group"><label>Current Location</label><input type="text" class="cand-loc"></div>
Â  Â  </div>
Â  Â  <div class="form-row">
Â  Â  Â  <div class="form-group"><label>Preferred Location</label><input type="text" class="cand-pref"></div>
Â  Â  Â  <div class="form-group"><label>Current CTC</label><input type="text" class="cand-ctc"></div>
Â  Â  Â  <div class="form-group"><label>Expected CTC</label><input type="text" class="cand-ectc"></div>
Â  Â  </div>
Â  Â  <div class="form-group"><label>LinkedIn</label><input type="url" class="cand-li"></div>
Â  Â  <div class="form-group"><label>Remarks</label><textarea class="cand-rem" rows="3"></textarea></div>
Â  Â  <div class="form-group">
Â  Â  Â  <label>Resume (PDF/DOC/DOCX) *</label>
Â  Â  Â  <div class="upload-box">
Â  Â  Â  Â  <input type="file" class="cand-resume" accept=".pdf,.doc,.docx" required onchange="handleResumeUpload(this)">
Â  Â  Â  Â  <div class="resume-info"></div>
Â  Â  Â  </div>
Â  Â  </div>
Â  `;
Â  container.appendChild(section);
}

function deleteCand(btn) {
Â  if (document.querySelectorAll('.candidate-section').length <= 1) {
Â  Â  return msg('âŒ Need at least 1 candidate!', 0);
Â  }
Â  btn.closest('.candidate-section').remove();
Â  updateCandidateNumbers();
}

function updateCandidateNumbers() {
Â  document.querySelectorAll('.candidate-section').forEach((s, i) => {
Â  Â  s.querySelector('h3').textContent = `Candidate ${i + 1}`;
Â  });
}

function downloadCSV() {
Â  const csv = "Candidate Name*,Candidate Email*,Current Organization,Experience (Years),Notice Period (Days),Current Location,Preferred Location,Current CTC (LPA),Expected CTC (LPA),LinkedIn Profile,Remarks\n" +
Â  Â  "Rajesh Kumar,rajesh@email.com,Infosys,5,60,Bangalore,Hyderabad,8,12,https://linkedin.com/in/rajesh,Java developer\n" +
Â  Â  "Priya Sharma,priya@email.com,TCS,3,30,Mumbai,Pune,6,9,https://linkedin.com/in/priya,Full-stack developer";
Â  const blob = new Blob([csv], {type: 'text/csv'});
Â  const a = document.createElement('a');
Â  a.href = URL.createObjectURL(blob);
Â  a.download = 'candidates_template.csv';
Â  a.click();
Â  msg('âœ… CSV template downloaded!', 1);
}

function importCSV(e) {
Â  const file = e.target.files[0];
Â  if (!file) return;
Â Â 
Â  const reader = new FileReader();
Â  reader.onload = (ev) => {
Â  Â  const rows = parseCSV(ev.target.result);
Â  Â  if (rows.length < 2) return msg('âŒ No data found in CSV!', 0);
Â  Â Â 
Â  Â  const headers = rows[0];
Â  Â  const data = rows.slice(1).map(row => {
Â  Â  Â  const obj = {};
Â  Â  Â  headers.forEach((key, i) => obj[key] = row[i] || '');
Â  Â  Â  return obj;
Â  Â  });
Â  Â Â 
Â  Â  const container = document.getElementById('candidateContainer');
Â  Â  container.innerHTML = '';
Â  Â  populateCands(data);
Â  Â  msg(`âœ… Imported ${data.length} candidates! Remember to upload resumes.`, 1);
Â  };
Â  reader.readAsText(file);
Â  e.target.value = '';
}

function parseCSV(txt) {
Â  const rows = [];
Â  let row = [], field = '', inQuote = false;
Â Â 
Â  for (let i = 0; i < txt.length; i++) {
Â  Â  const c = txt[i], next = txt[i+1];
Â  Â  if (c === '"') {
Â  Â  Â  if (inQuote && next === '"') { field += '"'; i++; }
Â  Â  Â  else inQuote = !inQuote;
Â  Â  } else if (c === ',' && !inQuote) {
Â  Â  Â  row.push(field.trim());
Â  Â  Â  field = '';
Â  Â  } else if ((c === '\n' || c === '\r') && !inQuote) {
Â  Â  Â  if (field || row.length) {
Â  Â  Â  Â  row.push(field.trim());
Â  Â  Â  Â  rows.push([...row]);
Â  Â  Â  Â  row = [];
Â  Â  Â  Â  field = '';
Â  Â  Â  }
Â  Â  Â  if (c === '\r' && next === '\n') i++;
Â  Â  } else field += c;
Â  }
Â  if (field || row.length) {
Â  Â  row.push(field.trim());
Â  Â  rows.push(row);
Â  }
Â  return rows.filter(r => r.some(c => c));
}

function populateCands(data) {
Â  const container = document.getElementById('candidateContainer');
Â  data.forEach((d, i) => {
Â  Â  const section = document.createElement('div');
Â  Â  section.className = 'candidate-section';
Â  Â  section.innerHTML = `
Â  Â  Â  <button type="button" class="delete-btn" onclick="deleteCand(this)">Delete</button>
Â  Â  Â  <h3>Candidate ${i+1}</h3>
Â  Â  Â  <div class="form-row">
Â  Â  Â  Â  <div class="form-group"><label>Name *</label><input type="text" class="cand-name" value="${d['Candidate Name*']||''}" required></div>
Â  Â  Â  Â  <div class="form-group"><label>Email *</label><input type="email" class="cand-email" value="${d['Candidate Email*']||''}" required></div>
Â  Â  Â  Â  <div class="form-group"><label>Organization</label><input type="text" class="cand-org" value="${d['Current Organization']||''}"></div>
Â  Â  Â  </div>
Â  Â  Â  <div class="form-row">
Â  Â  Â  Â  <div class="form-group"><label>Experience</label><input type="number" class="cand-exp" value="${d['Experience (Years)']||''}"></div>
Â  Â  Â  Â  <div class="form-group"><label>Notice</label><input type="text" class="cand-notice" value="${d['Notice Period (Days)']||''}"></div>
Â  Â  Â  Â  <div class="form-group"><label>Location</label><input type="text" class="cand-loc" value="${d['Current Location']||''}"></div>
Â  Â  Â  </div>
Â  Â  Â  <div class="form-row">
Â  Â  Â  Â  <div class="form-group"><label>Preferred</label><input type="text" class="cand-pref" value="${d['Preferred Location']||''}"></div>
Â  Â  Â  Â  <div class="form-group"><label>CTC</label><input type="text" class="cand-ctc" value="${d['Current CTC (LPA)']||''}"></div>
Â  Â  Â  Â  <div class="form-group"><label>Expected</label><input type="text" class="cand-ectc" value="${d['Expected CTC (LPA)']||''}"></div>
Â  Â  Â  </div>
Â  Â  Â  <div class="form-group"><label>LinkedIn</label><input type="url" class="cand-li" value="${d['LinkedIn Profile']||''}"></div>
Â  Â  Â  <div class="form-group"><label>Remarks</label><textarea class="cand-rem" rows="3">${d['Remarks']||''}</textarea></div>
Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  <label>Resume (PDF/DOC/DOCX) *</label>
Â  Â  Â  Â  <div class="upload-box">
Â  Â  Â  Â  Â  <input type="file" class="cand-resume" accept=".pdf,.doc,.docx" required onchange="handleResumeUpload(this)">
Â  Â  Â  Â  Â  <div class="resume-info"></div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  `;
Â  Â  container.appendChild(section);
Â  });
}

function handleResumeUpload(input) {
Â  const file = input.files[0];
Â  const infoDiv = input.parentElement.querySelector('.resume-info');
Â Â 
Â  if (!file) {
Â  Â  infoDiv.innerHTML = '';
Â  Â  return;
Â  }
Â Â 
Â  infoDiv.innerHTML = 'â³ Processing...';
Â  infoDiv.style.color = '#666';
Â Â 
Â  const reader = new FileReader();
Â  reader.onload = function(e) {
Â  Â  const base64Data = e.target.result;
Â  Â  input.setAttribute('data-base64', base64Data);
Â  Â  input.setAttribute('data-filename', file.name);
Â  Â  input.setAttribute('data-filetype', file.type);
Â  Â  input.setAttribute('data-filesize', file.size);
Â  Â  infoDiv.innerHTML = `âœ… ${file.name} (${(file.size / 1024).toFixed(1)} KB)`;
Â  Â  infoDiv.style.color = '#28a745';
Â  };
Â Â 
Â  reader.onerror = function() {
Â  Â  infoDiv.innerHTML = 'âŒ Error reading file';
Â  Â  infoDiv.style.color = '#dc3545';
Â  };
Â Â 
Â  reader.readAsDataURL(file);
}

async function submitForm() {
Â  const submissionType = document.getElementById('submissionType').value;
Â Â 
Â  if (!submissionType) {
Â  Â  return msg('âŒ Please select a submission type!', 0);
Â  }
Â Â 
Â  let submitterName = '';
Â  let submitterEmail = '';
Â  let referralEmpId = '';
Â  let referralEmpEmail = '';
Â  let source = '';
Â Â 
Â  if (submissionType === 'agency') {
Â  Â  submitterName = document.getElementById('submitterName').value;
Â  Â  submitterEmail = document.getElementById('submitterEmail').value;
Â  Â Â 
Â  Â  if (!submitterName || !submitterEmail) {
Â  Â  Â  return msg('âŒ Please fill in agency details!', 0);
Â  Â  }
Â  } else if (submissionType === 'applicant') {
Â  Â  const referralChoice = document.getElementById('referralChoice').value;
Â  Â Â 
Â  Â  if (!referralChoice) {
Â  Â  Â  return msg('âŒ Please answer the referral question!', 0);
Â  Â  }
Â  Â Â 
Â  Â  if (referralChoice === 'yes') {
Â  Â  Â  referralEmpId = document.getElementById('referralEmpId').value;
Â  Â  Â  referralEmpEmail = document.getElementById('referralEmpEmail').value;
Â  Â  Â Â 
Â  Â  Â  if (!referralEmpId || !referralEmpEmail) {
Â  Â  Â  Â  return msg('âŒ Please fill in employee referral details!', 0);
Â  Â  Â  }
Â  Â  } else if (referralChoice === 'no') {
Â  Â  Â  source = document.getElementById('sourceSelect').value;
Â  Â  Â Â 
Â  Â  Â  if (!source) {
Â  Â  Â  Â  return msg('âŒ Please select where you found this opening!', 0);
Â  Â  Â  }
Â  Â  }
Â  }
Â Â 
Â  const loader = document.getElementById('loader');
Â  loader.classList.add('active');
Â Â 
Â  await new Promise(resolve => setTimeout(resolve, 100));
Â Â 
Â  const candidates = [];
Â  const sections = document.querySelectorAll('.candidate-section');
Â Â 
Â  for (let i = 0; i < sections.length; i++) {
Â  Â  const s = sections[i];
Â  Â  const name = s.querySelector('.cand-name').value;
Â  Â  const email = s.querySelector('.cand-email').value;
Â  Â  const resumeInput = s.querySelector('.cand-resume');
Â  Â Â 
Â  Â  if (!name || !email) {
Â  Â  Â  loader.classList.remove('active');
Â  Â  Â  return msg('âŒ All candidates must have name and email!', 0);
Â  Â  }
Â  Â Â 
Â  Â  if (!resumeInput.files[0]) {
Â  Â  Â  loader.classList.remove('active');
Â  Â  Â  return msg(`âŒ Please upload resume for ${name}!`, 0);
Â  Â  }
Â  Â Â 
Â  Â  const base64Data = resumeInput.getAttribute('data-base64');
Â  Â  if (!base64Data) {
Â  Â  Â  loader.classList.remove('active');
Â  Â  Â  return msg(`âŒ Resume for ${name} is still processing. Please wait.`, 0);
Â  Â  }
Â  Â Â 
Â  Â  candidates.push({
Â  Â  Â  candidate_name: name,
Â  Â  Â  candidate_email: email,
Â  Â  Â  current_organization: s.querySelector('.cand-org').value,
Â  Â  Â  experience: s.querySelector('.cand-exp').value,
Â  Â  Â  notice_period: s.querySelector('.cand-notice').value,
Â  Â  Â  current_location: s.querySelector('.cand-loc').value,
Â  Â  Â  preferred_location: s.querySelector('.cand-pref').value,
Â  Â  Â  current_ctc: s.querySelector('.cand-ctc').value,
Â  Â  Â  expected_ctc: s.querySelector('.cand-ectc').value,
Â  Â  Â  linkedin: s.querySelector('.cand-li').value,
Â  Â  Â  remarks: s.querySelector('.cand-rem').value,
Â  Â  Â  resume: {
Â  Â  Â  Â  name: resumeInput.getAttribute('data-filename'),
Â  Â  Â  Â  type: resumeInput.getAttribute('data-filetype'),
Â  Â  Â  Â  size: parseInt(resumeInput.getAttribute('data-filesize')),
Â  Â  Â  Â  data: base64Data
Â  Â  Â  }
Â  Â  });
Â  }
Â Â 
Â  const payload = {
Â  Â  execution_id: EXECUTION_ID,
Â  Â  submission_type: submissionType,
Â  Â  submitter_name: submitterName,
Â  Â  submitter_email: submitterEmail,
Â  Â  referral_emp_id: referralEmpId,
Â  Â  referral_emp_email: referralEmpEmail,
Â  Â  source: source,
Â  Â  candidateContainer: candidates,
Â  Â  submitted_at: new Date().toISOString()
Â  };
Â Â 
Â  const jsonStr = JSON.stringify(payload);
Â  const totalSizeKB = (jsonStr.length / 1024).toFixed(1);
Â Â 
Â  console.log('ğŸ“¤ Submitting payload:', payload);
Â  console.log('ğŸ“Š Total size:', totalSizeKB, 'KB');
Â Â 
Â  try {
Â  Â  const response = await fetch(N8N_WEBHOOK_URL, {
Â  Â  Â  method: 'POST',
Â  Â  Â  headers: {
Â  Â  Â  Â  'Content-Type': 'application/json'
Â  Â  Â  },
Â  Â  Â  body: jsonStr
Â  Â  });
Â  Â Â 
Â  Â  console.log('ğŸ“¥ Response status:', response.status);
Â  Â Â 
Â  Â  loader.classList.remove('active');
Â  Â Â 
Â  Â  if (response.ok) {
Â  Â  Â  msg(`âœ… Successfully submitted ${candidates.length} candidate(s) with resumes! (${totalSizeKB} KB)`, 1);
Â  Â  Â Â 
Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  if (confirm('Submission successful! Reset form for new submission?')) {
Â  Â  Â  Â  Â  location.reload();
Â  Â  Â  Â  }
Â  Â  Â  }, 2000);
Â  Â  } else {
Â  Â  Â  const errorText = await response.text();
Â  Â  Â  console.error('âŒ Error response:', errorText);
Â  Â  Â  msg(`âŒ Submission failed: ${response.statusText}`, 0);
Â  Â  }
Â  } catch (error) {
Â  Â  console.error('âŒ Submission error:', error);
Â  Â  loader.classList.remove('active');
Â  Â  msg(`âŒ Error: ${error.message}`, 0);
Â  }
}

function msg(txt, ok) {
Â  const msgDiv = document.getElementById('msg');
Â  msgDiv.innerHTML = `<div class="${ok?'success':'error'}">${txt}</div>`;
Â  msgDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
Â  setTimeout(() => msgDiv.innerHTML = '', 8000);
}
</script>
</body>
</html>.